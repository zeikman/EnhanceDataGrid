jQuery.fn.clearHiddenFields=function(){this.find("*").filter(":input[type=hidden]").each(function(){this.value=null})};class EnhanceDataGrid{static checkDuplicateIds(){$("[id]").each(function(){let e=$(`[id="${this.id}"]`);e.length>1&&e[0]==this&&console.warn(`Multiple IDs #${this.id}|Count@ ${e.length}`)})}static isNull(e,t){return"boolean"==typeof t&&t?null===e:("string"==typeof e&&(e=e.toLowerCase()),null==e||"null"==e)}static isUndefined(e,t){return"boolean"==typeof t&&t?void 0===e:("string"==typeof e&&(e=e.toLowerCase()),void 0==e||"undefined"==e)}static isEmptyString(e){return""===e}static isUnset(e,t){return"boolean"==typeof t&&t&&"string"==typeof e&&(e=e.trim()),!!(EnhanceDataGrid.isNull(e)||EnhanceDataGrid.isUndefined(e)||EnhanceDataGrid.isEmptyString(e))}static transformStringToObject(e,t="=",i="&"){"?"===e[0]&&(e=e.slice(1));let n={},r=e.split(i);for(let o=0;o<r.length;o++){let a=r[o].split(t);n[a[0]]=window.decodeURIComponent(a[1])}return n}static transformObjectToString(e,t="=",i="&"){let n="";return $.each(e,(e,r)=>n+=`${e}${t}${window.encodeURIComponent(r)}${i}`),n.substring(0,n.length-1)}static getSearchParameters(e){let t="string"==typeof e&&e?e.split("?")[1]:window.location.search.slice(1);return null!==t&&""!==t?EnhanceDataGrid.transformStringToObject(t):{}}static insertQueryString(e,t){if(e.indexOf("?")>-1){let i=EnhanceDataGrid.getSearchParameters(e);Object.assign(i,t),t=i,e=e.split("?")[0]}return e+"?"+EnhanceDataGrid.transformObjectToString(t)}static debounce(e,t){let i=null;return function(){let n=this,r=arguments;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(n,r)},t)}}static throttle(e,t,i){t=t||(t=250);let n=null,r=null;return function(){let o=i||this,a=+new Date,l=arguments;n&&a<n+t?(window.clearTimeout(r),r=window.setTimeout(function(){n=a,e.apply(o,l)},t)):(n=a,e.apply(o,l))}}static isValidKeyboardInput(e){let t={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178};switch(e.keyCode){case t.TAB:case t.CLEAR:case t.ENTER:case t.SHIFT:case t.CTRL:case t.ALT:case t.PAUSE:case t.CAPS_LOCK:case t.ESCAPE:case t.PAGE_UP:case t.PAGE_DOWN:case t.END:case t.HOME:case t.LEFT_ARROW:case t.UP_ARROW:case t.RIGHT_ARROW:case t.DOWN_ARROW:case t.INSERT:case t.DELETE:case t.HELP:case t.LEFT_WINDOW:case t.RIGHT_WINDOW:case t.SELECT:case t.NUMPAD_MULTIPLY:case t.NUMPAD_PLUS:case t.NUMPAD_ENTER:case t.NUMPAD_MINUS:case t.NUMPAD_PERIOD:case t.NUMPAD_DIVIDE:case t.F1:case t.F2:case t.F3:case t.F4:case t.F5:case t.F6:case t.F7:case t.F8:case t.F9:case t.F10:case t.F11:case t.F12:case t.F13:case t.F14:case t.F15:case t.NUM_LOCK:case t.SCROLL_LOCK:case t.copyKey:return!1;default:return!0}}#a;#b;#c;#d=["autoFilter","autoFind","autoDelayTiming","bootstrap","buttonTheme","centeredColumns","checkedDatafield","dataAdapter","dataSource","dateFormat","enterFilter","enterFind","jsonSource","rowIndexWidth","searchInput","showFilterButton","showFilterRowButton","showFindButton","showRowIndex","tbElement","useBootstrap",];#e={};#f={width:"100%",height:"100%",sortable:!0,filterable:!0,filtermode:"excel",enabletooltips:!0,showaggregates:!0,autoFilter:!1,autoFind:!1,autoDelayTiming:300,bootstrap:!1,buttonTheme:"",centeredColumns:!1,checkedDatafield:"selected",dataAdapter:"",dataSource:"",dateFormat:"",enterFilter:!0,enterFind:!1,jsonSource:null,rowIndexWidth:50,searchInput:!1,showFilterButton:!0,showFilterRowButton:!0,showFindButton:!1,showRowIndex:!0,tbElement:[],useBootstrap:!1};#g={};#h={};#i=[];#j;#k;#l;#m=!1;#n(e){let t=typeof e,i={useBootstrap:this.#e.useBootstrap,animation:"zoom",closeAnimation:"zoom",animateFromElement:!1,backgroundDismiss:!0,escapeKey:!0};"string"===t&&(i={...i,title:"",content:e}),"object"===t&&(i={...i,...e}),$.alert?$.alert(i):("string"===t&&window.alert(e),"object"===t&&e.content&&window.alert(e.content))}#o(n){this.#a=n,this.#p(),this.#q(),this.#r();let r=this,o=this.#c,a=this.#f,l=this.#e,s=l.tbElement,d=s.length>0,c="boolean"==typeof l.searchInput&&l.searchInput,u="boolean"==typeof l.showRowIndex&&l.showRowIndex;if((d||c)&&(a.showtoolbar=!0),u&&EnhanceDataGrid.isUnset(a.showstatusbar)&&(a.showstatusbar=!0),this.#j=l.jsonSource,this.#k=l.dataSource,this.#l=l.dataAdapter,EnhanceDataGrid.isUnset(a.source)&&(this.#j&&"object"==typeof this.#j&&(this.#k={url:this.#j.url?this.#j.url:"",datafields:this.#j.datafields?this.#j.datafields:[],datatype:"json",id:"id",cache:!1,addrow:function(e,t,i,n){let r=$.param(t);$.ajax({url:this.#j.url,data:r,dataType:"json",cache:!1,success:function(e,t,i){n(!0)},error:function(e,t,i){n(!1)}})},deleterow:function(e,t){t(!0)},updaterow:function(e,t,i){i(!0)}},this.#j.opt&&"object"==typeof this.#j.opt&&(this.#k={...this.#k,...this.#j.opt})),this.#k&&(this.#l=new $.jqx.dataAdapter(this.#k)),this.#l&&(a.source=this.#l)),$(o).on("bindingcomplete",e=>{let t=$(r.#c).jqxGrid("getrows"),i=r.#e.checkedDatafield;r.#i=[];for(let n=0;n<t.length;n++){let o=t[n];1==o[i]&&r.#i.push(o.id)}r.#m&&r.clearSelection(),r.#m=!1}),!($(o).length>0))return console.error(`[EnhanceDataGrid] Error: DOM element '${o}' not found !`);"old"===n&&(this.#b=$(o).jqxGrid(a),this.#s()),"new"===n&&(this.#b=new jqxGrid(o,a))}#s(){let h=this;this.jqxGrid.on("cellvaluechanged",e=>{let t=e.args,i=t.rowindex,n=t.datafield;t.oldvalue;let r=t.newvalue,o=h.getRowData(i);if(n===h.#e.checkedDatafield){h.#g[o.id]=r;let a=h.#i.indexOf(o.id);r?-1==a&&h.#i.push(o.id):a>-1&&h.#i.splice(a,1)}if(h.#h[o.id])h.#h[o.id][n]=r;else{let l=Object({});l.rowindex=i,l[n]=r,h.#h[o.id]=l}})}#t(){this.#g={},this.#h={}}#p(){let p=this.#f;for(let f in p)Object.hasOwnProperty.call(p,f)&&this.#d.indexOf(f)>-1&&(this.#e[f]=p[f],delete this.#f[f])}#q(){!0===this.#e.centeredColumns&&(this.#f.columns.forEach(e=>{e.hidden||e.align||(e.align="center")}),this.#f.columngroups&&this.#f.columngroups.forEach(e=>{e.hidden||e.align||(e.align="center")})),this.#u()}#u(){this.#e.showRowIndex&&this.#f.columns.unshift({text:"No",datafield:"numb",columntype:"number",align:"center",cellsalign:"center",pinned:!0,menu:!1,sortable:!1,editable:!1,groupable:!1,resizable:!1,draggable:!1,filterable:!1,aggregates:["count"],width:this.#e.rowIndexWidth,cellsrenderer(e,t,i,n,r,o){let a=++i;return o.numb=a,o.parentItem&&(a=o.parentItem.subItems.findIndex(e=>e.uid==o.uid),o.numb=++a),$(n).text(a).get(0).outerHTML},aggregatesrenderer(e){let t=e.count;return t||(t=0),`<div style="display: flex; align-items: center; justify-content: center; height: 100%;">${t}</div>`}})}#r(){let g=this,w=this.#c,x=w.slice(1),b=this.#f,m=this.#e;b.rendertoolbar=e=>{let t=$("<div />").addClass("edg-group").css({height:"100%",padding:"0px 5px"});if(e.append(t),"boolean"==typeof m.searchInput&&m.searchInput){let i="boolean"==typeof m.enterFind&&m.enterFind,n="boolean"==typeof m.enterFilter&&m.enterFilter,r="boolean"==typeof m.autoFind&&m.autoFind,o="boolean"==typeof m.autoFilter&&m.autoFilter,a="No functioning... (T_T)",l="Find",s="Filter",d="No functioning... (T_T)";i&&(a="Find Record",l="Find (Ctrl+Enter)",d="Clear Find (ESC)"),n&&(a="Filter Record",s="Filter (Enter)",d="Clear Filter (ESC)"),i&&n&&(a="Find/Filter Record",d="Clear Find/Filter (ESC)"),r&&(a="Auto Find Record",d="Clear Find (ESC)"),o&&(a="Auto Filter Record",d="Clear Filter (ESC)"),r&&o&&(a="autoFind? autoFilter?",d="autoFind? autoFilter?");let c={width:200,height:25,placeHolder:a},u={margin:"0px 5px 0px 3px",padding:"0px 3px",minWidth:200};("boolean"==typeof m.showFindButton&&m.showFindButton||"boolean"==typeof m.showFilterButton&&m.showFilterButton||"boolean"==typeof m.showFilterRowButton&&m.showFilterRowButton)&&(u.margin="0px 5px 0px 0px");let h=$(`<input id="${x}_searchInput" type="text" />`).jqxInput(c).css(u);t.append(h);let p={theme:m.buttonTheme,height:25};if(r||o){if(r&&o)return this.#n({columnClass:"medium",title:"<b>Setting Error</b>",content:`Grid ID: ${this.#c}. You can either set autoFind:true or autoFilter:true but not both.`}),!1;let f=EnhanceDataGrid.debounce(function(e){(h.val().trim()||EnhanceDataGrid.isValidKeyboardInput(e))&&(e.preventDefault(),r&&g.#v(h,!0),o&&g.#w(h,!0))},m.autoDelayTiming);h.keyup(e=>{f(e),27===e.which&&G.trigger("click")})}else{h.keydown(e=>{13===e.which&&(e.ctrlKey?"boolean"==typeof m.enterFind&&m.enterFind&&g.#v(h):"boolean"==typeof m.enterFilter&&m.enterFilter&&g.#w(h)),27===e.which&&G.trigger("click")});let y=$("<button>").attr("title",l);"boolean"==typeof m.showFindButton&&m.showFindButton&&($("<i>").addClass("fa-solid fa-fw fa-search").appendTo(y),y.jqxButton(p).on("click",e=>{e.preventDefault(),g.#v(h)}),t.append(y));let j=$("<button>").attr("title",s);"boolean"==typeof m.showFilterButton&&m.showFilterButton&&($("<i>").addClass("fa-solid fa-fw fa-filter").appendTo(j),j.jqxButton(p).on("click",e=>{e.preventDefault(),g.#w(h)}),t.append(j))}let G=$("<button>").attr("title",d);if($("<i>").attr("id",`${x}_filterRowClear`).addClass("fa-solid fa-fw fa-xmark").appendTo(G),G.jqxButton(p).on("click",e=>{e.preventDefault(),"old"===g.#a&&g.jqxGrid.jqxGrid("clearfilters"),"new"===g.#a&&g.jqxGrid.clearfilters(),g.clearSelection(),h.val(null)}),t.append(G),"boolean"==typeof m.showFilterRowButton&&m.showFilterRowButton){let q=$("<button>").attr({id:`${x}_filterRowButton`,title:"Show Filter Row"});"boolean"==typeof b.showfilterrow&&b.showfilterrow?($("<i>").attr("id",`${x}_filterRowArrowDown`).addClass("fa-solid fa-fw fa-chevron-down").hide().appendTo(q),$("<i>").attr("id",`${x}_filterRowArrowUp`).addClass("fa-solid fa-fw fa-chevron-up").appendTo(q)):($("<i>").attr("id",`${x}_filterRowArrowDown`).addClass("fa-solid fa-fw fa-chevron-down").appendTo(q),$("<i>").attr("id",`${x}_filterRowArrowUp`).addClass("fa-solid fa-fw fa-chevron-up").hide().appendTo(q)),q.jqxButton(p).on("click",e=>{e.preventDefault(),$(`${w}_filterRowButton`).attr("title",g.jqxGrid.jqxGrid("showfilterrow")?"Show Filter Row":"Hide Filter Row"),g.jqxGrid.jqxGrid({showfilterrow:!g.jqxGrid.jqxGrid("showfilterrow")}),"old"===g.#a&&g.jqxGrid.jqxGrid("clearfilters"),"new"===g.#a&&g.jqxGrid.clearfilters(),g.jqxGrid.jqxGrid("showfilterrow")?($(`${w}_filterRowArrowDown`).hide(),$(`${w}_filterRowArrowUp`).show()):($(`${w}_filterRowArrowDown`).show(),$(`${w}_filterRowArrowUp`).hide())}),t.append(q)}let _=m.tbElement;parseInt(_.length)>0&&_[0].button&&"divider"!=_[0].button&&$("<div>").css({width:4,height:20,minWidth:1,background:"#555555",borderRadius:5}).appendTo(t)}g.#x(t)}}#x(y){let j=this;this.#f;let G=this.#e,q=G.tbElement,_={reload:{icon:"fa-solid fa-fw fa-sync-alt",title:"Reload Record",width:25,height:25,widget:"jqxButton"},add:{icon:"fa-solid fa-fw fa-plus",title:"Add New",width:25,height:25,widget:"jqxButton"},edit:{icon:"fa-solid fa-fw fa-edit",title:"Edit",width:25,height:25,widget:"jqxButton"},delete:{icon:"fa-solid fa-fw fa-trash-alt",title:"Delete",width:25,height:25,widget:"jqxButton"},print:{icon:"fa-solid fa-fw fa-print",title:"Print",width:25,height:25,widget:"jqxButton"},excel:{icon:"fa-solid fa-fw fa-file-excel",title:"Export Excel",width:25,height:25,widget:"jqxButton"},csv:{icon:"fa-solid fa-fw fa-file-alt",title:"Export CSV",width:64,height:25,widget:"jqxButton"},custombutton:{icon:"fa-solid fa-fw fa-circle-question",title:"Button",width:"auto",height:25,widget:"jqxButton"}},D={no_row_selected:{title:"No Record Selected",message:"Please select one of the record first."},no_data_id:{title:'Property "id" Not Found',message:"No data ID found !"},no_row_print:{title:"No Record Found",message:"No record for printing."},no_url:{title:'Property "url" Not Found',message:'Please specified "url" property.'}},k={click:{_add:function(e){e.preventDefault(),$(this).keydown();let t=-1==e.currentTarget.id.indexOf("#")?"#"+e.currentTarget.id:e.currentTarget.id,i=j.#y(q,t,"check"),n="function"!=typeof i||i();if(n){let r=j.#y(q,t,"win"),o=j.#y(q,t,"modal"),a=j.#y(q,t,"form");a&&function e(t){if($(t).length>0)return $(t+" .jqx-input").length>0&&$(t+" .jqx-input").val(null),$(t+" .jqx-datetimeinput").length>0&&$(t+" .jqx-datetimeinput").val(null),$(t+" .jqx-checkbox").length>0&&$(t+" .jqx-checkbox").jqxCheckBox("uncheck"),$(t+" .jqx-radiobutton").length>0&&$(t+" .jqx-radiobutton").jqxRadioButton("uncheck"),$(t+" .jqx-combobox").length>0&&$(t+" .jqx-combobox").jqxComboBox("clearSelection"),$(t).find("*").filter(":input").each(function(){this.value=null}),$(t).find("input[type=checkbox]").prop("checked",!1),$(t).find("input[type=radio]").prop("checked",!1),$(t).find("select").prop("selectedIndex",-1),$(t).clearHiddenFields(),!0;j.#n({title:"Form Not Found",content:`Form ID: <b>${t}</b>`})}(a),r&&S({id:t,element:this}),o&&F(o)}$(this).keyup()},_edit:function(e){e.preventDefault();let t=j.getSelectedRowIndex();if(t>-1){$(this).keydown();let i=-1==e.currentTarget.id.indexOf("#")?"#"+e.currentTarget.id:e.currentTarget.id,n=j.#y(q,i,"check"),r="function"!=typeof n||n();if(r){let o=j.#y(q,i,"win"),a=j.#y(q,i,"modal");o&&S({id:i,element:this}),a&&F(a)}$(this).keyup()}else E({title:D.no_row_selected.title,error:D.no_row_selected.message})},_delete:function(e){e.preventDefault();let t=j.getSelectedRowIndex();if(t>-1){$(this).keydown();let i=-1==e.currentTarget.id.indexOf("#")?"#"+e.currentTarget.id:e.currentTarget.id,n=j.#y(q,i,"check"),r="function"!=typeof n||n();if(r){let o=j.getSelectedRowData(),a=o.id,l=j.#y(q,i,"param"),s=j.#y(q,i,"postparam"),d=j.#y(q,i,"success"),c=j.#y(q,i,"fail"),u=j.#y(q,i,"url"),h=j.#y(q,i,"message"),p=j.#y(q,i,"debug");if(h=void 0===h||""===h?"Are you sure to delete selected record ?":h,void 0===u||void 0===u||"null"==typeof u||null===u)return E({title:D.no_url.title,error:D.no_url.message}),!1;if($.confirm){$.confirm({useBootstrap:G.useBootstrap,columnClass:"medium",animation:"zoom",closeAnimation:"zoom",animateFromElement:!1,backgroundDismiss:!0,escapeKey:!0,title:"Delete Record",content:h,buttons:{confirm:{btnClass:"btn-danger",action(){if("function"==typeof u&&(a?u(o,a):u(o)),"string"==typeof u){if(!a)return j.#n({title:D.no_data_id.title,content:D.no_data_id.message}),!1;{let e={id:a};if(s&&"object"==typeof s&&(e=EnhanceDataGrid.insertQueryString(e,s)),s&&"function"==typeof s&&(e=EnhanceDataGrid.insertQueryString(e,s())),l&&"object"==typeof l&&(u=EnhanceDataGrid.insertQueryString(u,l)),l&&"function"==typeof l&&(u=EnhanceDataGrid.insertQueryString(u,l())),!0===p||"true"===p)return console.log(`%c$.post() to '${u}' with $_POST ${JSON.stringify(e)}`,"color: red; font-weight: bold;"),!0;$.post(u,e).done(e=>{d&&"function"==typeof d?d(e):j.refresh()}).fail(e=>{c&&"function"==typeof c?c(e):j.#n({title:"Delete Failed",content:e})})}}}},cancel(){}}});return}{let f=window.confirm(h);if(f&&("function"==typeof u&&(a?u(o,a):u(o)),"string"==typeof u)){if(!a)return j.#n({title:D.no_data_id.title,content:D.no_data_id.message}),!1;{let g={id:a};if(s&&"object"==typeof s&&(g=EnhanceDataGrid.insertQueryString(g,s)),s&&"function"==typeof s&&(g=EnhanceDataGrid.insertQueryString(g,s())),l&&"object"==typeof l&&(u=EnhanceDataGrid.insertQueryString(u,l)),l&&"function"==typeof l&&(u=EnhanceDataGrid.insertQueryString(u,l())),!0===p||"true"===p)return console.log(`%c$.post() to '${u}' with $_POST ${JSON.stringify(g)}`,"color: red; font-weight: bold;"),!0;$.post(u,g).done(e=>{d&&"function"==typeof d?d(e):j.refresh()}).fail(e=>{c&&"function"==typeof c?c(e):j.#n({title:"Delete Failed",content:e})})}}}}$(this).keyup()}else E({title:D.no_row_selected.title,error:D.no_row_selected.message})},_find:function(e){e.preventDefault(),$(this).keydown(),console.log("_find"),$(this).keyup()},_reload:function(e){e.preventDefault(),$(this).keydown(),j.refresh(),$(this).keyup()},_view:function(e){e.preventDefault(),$(this).keydown(),console.log("_view"),$(this).keyup()},_save:function(e){e.preventDefault(),$(this).keydown(),console.log("_save"),$(this).keyup()},_print:function(e){if(e.preventDefault(),j.getRows().length>0){let t=-1==e.currentTarget.id.indexOf("#")?"#"+e.currentTarget.id:e.currentTarget.id;$(this).keydown();let i=j.#y(q,t,"param"),n=j.#y(q,t,"url");if(void 0===n||void 0===n||"null"==typeof n||null===n)return E({title:D.no_url.title,error:D.no_url.message}),!1;i&&"object"==typeof i&&(n=EnhanceDataGrid.insertQueryString(n,i)),i&&"function"==typeof i&&(n=EnhanceDataGrid.insertQueryString(n,i())),$(this).keyup(),window.open(n)}else E({title:D.no_row_print.title,error:D.no_row_print.message})},_excel:function(e){e.preventDefault(),$(this).keydown();let t=-1==e.currentTarget.id.indexOf("#")?"#"+e.currentTarget.id:e.currentTarget.id,i=j.#y(q,t,"filename");j.jqxGrid.jqxGrid("exportdata","xlsx",i||"EXCEL_FILE"),$(this).keyup()},_csv:function(e){e.preventDefault(),$(this).keydown();let t=-1==e.currentTarget.id.indexOf("#")?"#"+e.currentTarget.id:e.currentTarget.id,i=j.#y(q,t,"filename");j.jqxGrid.jqxGrid("exportdata","csv",i||"CSV_FILE"),$(this).keyup()},_active:function(e){e.preventDefault(),$(this).keydown(),console.log("_active"),$(this).keyup()},_inactive:function(e){e.preventDefault(),$(this).keydown(),console.log("_inactive"),$(this).keyup()}}};function F(e,t){var i;let n="string"==typeof(i={id:e}).id?$(i.id):"object"==typeof i.id?i.id:null;t&&("number"==typeof t.timeout&&setTimeout(()=>n.modal("hide"),t.timeout),"string"==typeof t.showContent&&(function e(t){let i=$(t),n=i.parent();n.children().hide(),i.show()}(t.showContent),$(t.showContent).scrollTop(0))),n.modal("show")}function E(e){G.useBootstrap?v.call(j,e.title?e.title:"No Record Selected",e.error):j.#n(e.error)}function v(e,t){if("object"==typeof bootstrap){let i=`${this.#c}_edit_modal_error`,n=`<div id="${i.slice(1)}" class="modal fade" tabindex="-1"><div class="modal-dialog"><div class="modal-content text-bg-danger"><div class="modal-header"><h5 class="modal-modalTitle">${e}</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><p class="m-0">${t}</p></div><div class="modal-footer"><button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Close</button></div></div></div></div>`;if(0===$(i).length){$("body").append($(n));let r=$(i),o=new bootstrap.Modal(i,{});r.on("hidden.bs.modal",e=>{o.dispose(),r.remove()}),o.show()}}else j.#n($.alert?{title:e,content:t}:t)}function S(e){let t=e.id,i=e.element,n=j.#y(q,t,"win"),r=j.#y(q,t,"verticalAlign"),o=j.#y(q,t,"winOpenOnButton"),a=j.#y(q,t,"winOpenOnClick");("boolean"!=typeof o||EnhanceDataGrid.isUnset(o))&&(o=!0),("boolean"!=typeof a||EnhanceDataGrid.isUnset(a))&&(a=!0),$(n).length>0?(function e(t){let i=t.win,n=t.element,r=t.vAlign,o=t.winOnBtn;if($(i).jqxWindow({position:"center"}),"number"==typeof r){let a=new $.jqx.response,l=a.viewPort;$(i).jqxWindow({position:{x:(l.width-$(i).width())/2,y:r}})}if("boolean"==typeof o&&o){let s=$(n).offset();$(i).jqxWindow({position:{x:s.left,y:s.top}})}}({...e,win:n,vAlign:r,winOnBtn:o,openWin:a}),"boolean"==typeof a&&a&&$(n).jqxWindow("open")):j.#n({title:"jqxWindow Widget Not Found",content:`Button ID: <b>${i.id}</b><br />jqxWindow ID: <b>${n}</b>`})}let C=$('<div class="flex-expander" style="position: relative; min-width: 20px;" />'),R=$("<div>").css({minWidth:4,width:4,height:20,background:"#555555",borderRadius:5});for(let P=0;P<q.length;P++){let T=q[P].button.toLowerCase(),A=!0,B="boolean"==typeof q[P].visible,I="number"==typeof q[P].visible&&0===q[P].visible,N="string"==typeof q[P].visible&&("0"===q[P].visible||""===q[P].visible);if((B||I||N)&&(A=!1),A){if("divider"===T)y.append(C.clone());else if("separator"===T)y.append(R.clone());else if("custom"===T)!0===q[P].admin||1===q[P].admin||"1"===q[P].admin?y.append(q[P].buttonNode.addClass("btn-admin")):y.append(q[P].buttonNode),q[P].callback&&"function"==typeof q[P].callback&&q[P].callback();else if("icon"===T);else if(_[T]){let O=this.#z({id:q[P].id?q[P].id:null,disabled:"boolean"==typeof q[P].disabled&&q[P].disabled,icon:q[P].icon?q[P].icon:_[T].icon,iconColor:q[P].iconColor?q[P].iconColor:_[T].iconColor,text:q[P].text||""===q[P].text?q[P].text:"",title:q[P].title||""===q[P].title?q[P].title:_[T].title});(!0===q[P].admin||1===q[P].admin||"1"===q[P].admin)&&O.addClass("btn-admin");let U="_"+T;O.on("click",q[P].click?e=>q[P].click(e,j.getSelectedRowData()):k.click[U]),q[P].beforeClick&&O.keydown(q[P].beforeClick),q[P].afterClick&&O.keyup(q[P].afterClick),q[P]=this.#A({container:y,btn:O,theme:q[P].theme?q[P].theme:this.#e.buttonTheme,width:q[P].width?q[P].width:q[P].text||""===q[P].text?"auto":_[T].width,height:q[P].height?q[P].height:_[T].height,widget:q[P].widget?q[P].widget:_[T].widget,disabled:q[P].disabled,btnElement:q[P]})}else j.#n({title:"Undefined Button",content:`Unknown "${T}" button.`})}}}#z(L){let W=L.id;L.disabled;let M=L.icon,z=L.iconColor,H=L.text,Q=L.title;L.widget;let K=$("<button>");if(W&&K.attr("id",W),Q&&K.attr("title",Q),"none"!=M){let V=$("<i>");z&&V.css("color",z),V.addClass(`${M}`),V.appendTo(K)}if(H){let Y=$("<span>").html(H).appendTo(K);"none"===M&&Y.css("margin",0)}return K}#A(J){let X=J.container,Z=J.btn;J.width;let ee=J.height,et=J.widget,ei=J.theme,en=J.disabled,er=J.btnElement,eo={theme:ei,height:ee,disabled:"boolean"==typeof en&&en};if(et){var ea,el;"jqxToggleButton"===et&&Z.jqxToggleButton(eo),"jqxButton"===et&&Z.jqxButton(eo),"jqxDropDownList"===et&&Z.jqxDropDownList(eo),er=(ea=Z,el=er,-1===ea.attr("id").indexOf("#")?el.id="#"+ea.attr("id"):el.id=ea.attr("id"),el)}else console.error("Error: libGrid.#_initGridButton()","Unknown button type !<br />Plese check your coding.");return X.append(Z),er}#y=(e,t,i)=>{let n="";return t=t.toLowerCase(),$.each(e,(e,r)=>{if(r.id){let o=r.id.toLowerCase()===t;if(o){switch(i){case"title":n=r.title;break;case"form":n=r.hasOwnProperty(i)?r.form:"";break;case"url":n=r.url;break;case"element":n=r.element;break;case"debug":n=r.debug;break;case"message":n=r.message;break;case"filename":n=r.filename;break;case"modal":n=r.modal;break;case"window":n=r.window;break;case"win":n=r.win;break;case"winOpenOnButton":n=r.winOpenOnButton;break;case"winOpenOnClick":n=r.winOpenOnClick;break;case"verticalAlign":n=r.verticalAlign;break;case"admin":n=r.admin;break;case"visible":n=r.visible;break;case"param":n=r.param;break;case"postparam":n=r.postparam;break;case"keyword":n=r.keyword;break;case"column":n=r.column;break;case"columnprefix":n=r.columnprefix;break;case"click":n=r.click;break;case"beforeClick":n=r.beforeClick;break;case"afterClick":n=r.afterClick;break;case"check":n=r.check;break;case"success":n=r.success;break;case"fail":n=r.fail;break;case"error":n=r.error}return!1}}}),n};#v(es,ed=!1){let ec;if("old"===this.#a&&(ec=this.jqxGrid.jqxGrid("getsortcolumn")),"new"===this.#a&&(ec=this.jqxGrid.getsortcolumn()),!ec)return this.#n({columnClass:"medium",title:"<b>Warning : Find Data</b>",content:"Please perform column sorting to select search field."}),"boolean"==typeof ed&&ed&&es.val(""),!1;if("old"===this.#a){let eu=this.jqxGrid.jqxGrid("getdisplayrows"),eh=es.val().trim().toLowerCase();this.jqxGrid.jqxGrid("getcolumnproperty",ec,"cellsformat");let ep=-1,ef=-1;if(eh){let eg="";for(let ew=0;ew<eu.length;ew++){if(eg=eu[ew][ec],EnhanceDataGrid.isNull(eu[ew][ec]))continue;let ex=eg.toString().toLowerCase().search(eh);if(ex>-1){ep=this.jqxGrid.jqxGrid("getrowboundindex",ew),ef=ew;break}}}ep>-1?(this.jqxGrid.jqxGrid("selectrow",ep),this.jqxGrid.jqxGrid("ensurerowvisible",ef)):this.clearSelection()}if("new"===this.#a){let e8=this.jqxGrid.getdisplayrows(),eb=es.val().trim().toLowerCase();this.jqxGrid.getcolumnproperty(ec,"cellsformat");let em=-1,ey=-1;if(eb){let ej="";for(let eG=0;eG<e8.length;eG++){if(ej=e8[eG][ec],EnhanceDataGrid.isNull(e8[eG][ec]))continue;let eq=ej.toString().toLowerCase().search(eb);if(eq>-1){em=this.jqxGrid.getrowboundindex(eG),ey=eG;break}}}em>-1?(this.jqxGrid.selectrow(em),this.jqxGrid.ensurerowvisible(ey)):this.clearSelection()}return!0}#w(e_,eD=!1){let e$;if("old"===this.#a&&(e$=this.jqxGrid.jqxGrid("getsortcolumn")),"new"===this.#a&&(e$=this.jqxGrid.getsortcolumn()),!e$)return this.#n({columnClass:"medium",title:"<b>Warning : Filter Data</b>",content:"Please perform column sorting to select filter field."}),"boolean"==typeof eD&&eD&&e_.val(""),!1;if("old"===this.#a){let ek=this.jqxGrid.jqxGrid("getcolumnproperty",e$,"cellsformat"),eF=new $.jqx.filter,eE=e_.val().trim();if(eE){let ev=eF.createfilter("stringfilter",eE,"CONTAINS");eF.addfilter(1,ev),eF.createfilter("numericfilter",eE,"EQUAL");let eS=this.#e.dateFormat;if(eS&&ek===eS){eE=new Date(eE);var eC=eF.createfilter("datefilter",eE,"EQUAL");eF.addfilter(1,eC)}this.jqxGrid.jqxGrid("addfilter",e$,eF),this.jqxGrid.jqxGrid("applyfilters")}else this.jqxGrid.jqxGrid("clearfilters")}if("new"===this.#a){let eR=this.jqxGrid.getcolumnproperty(e$,"cellsformat"),eP=new $.jqx.filter,eT=e_.val().trim();if(eT){let eA=eP.createfilter("stringfilter",eT,"CONTAINS");eP.addfilter(1,eA),eP.createfilter("numericfilter",eT,"EQUAL");let eB=this.#e.dateFormat;if(eB&&eR===eB){eT=new Date(eT);var eC=eP.createfilter("datefilter",eT,"EQUAL");eP.addfilter(1,eC)}this.jqxGrid.addfilter(e$,eP),this.jqxGrid.applyfilters()}else this.jqxGrid.clearfilters()}return!0}constructor(){this.prop;let e=arguments[0],t=arguments[1],i="old";if("object"==typeof e){if(!e.id)return console.error("[EnhanceDataGrid] Error: No define 'id' !");if(!e.columns)return console.error("[EnhanceDataGrid] Error: No define 'columns' !");this.#c=e.id,delete e.id}"string"==typeof e&&"object"==typeof t&&(i="new",this.#c=e,e=t),this.#f={...this.#f,...e},this.#o(i)}get jqxGrid(){return this.#b}clearSelection(){if("old"===this.#a)switch(this.jqxGrid.jqxGrid("selectionmode")){case"singlerow":case"singlecell":this.getSelectedRowIndex()>-1&&this.jqxGrid.jqxGrid("clearselection");break;case"singlerow":""!=this.getSelectedRowIndexes&&this.jqxGrid.jqxGrid("clearselection");break;default:this.jqxGrid.jqxGrid("clearselection")}if("new"===this.#a)switch(this.jqxGrid.selectionmode){case"singlerow":case"singlecell":this.getSelectedRowIndex()>-1&&this.jqxGrid.clearselection();break;case"singlerow":this.getSelectedRowIndexes().length>0&&this.jqxGrid.clearselection();break;default:this.jqxGrid.clearselection()}}getAllDirty(){return this.#h}getCellValue(e,t){return"old"===this.#a?this.jqxGrid.jqxGrid("getcellvalue",e,t):"new"===this.#a?this.jqxGrid.getcellvalue(e,t):void 0}getCheckedItems(){return this.#i}getDirty(){return this.#g}getRowData(e){return(e=e>-1?e:-1,"old"===this.#a)?this.jqxGrid.jqxGrid("getrowdata",e):"new"===this.#a?this.jqxGrid.getrowdata(e):void 0}getRows(){return"old"===this.#a?this.jqxGrid.jqxGrid("getrows"):"new"===this.#a?this.jqxGrid.getrows():void 0}getSelectedCellValue(e){return"old"===this.#a?this.jqxGrid.jqxGrid("getcellvalue",this.getSelectedRowIndex(),e):"new"===this.#a?this.jqxGrid.getcellvalue(this.getSelectedRowIndex(),e):void 0}getSelectedRowData(){return"old"===this.#a?this.jqxGrid.jqxGrid("getrowdata",this.getSelectedRowIndex()):"new"===this.#a?this.jqxGrid.getrowdata(this.getSelectedRowIndex()):void 0}getSelectedRowIndex(){return"old"===this.#a?this.jqxGrid.jqxGrid("getselectedrowindex"):"new"===this.#a?this.jqxGrid.getselectedrowindex():void 0}getSelectedRowIndexes(){return"old"===this.#a?this.jqxGrid.jqxGrid("getselectedrowindexes"):"new"===this.#a?this.jqxGrid.getselectedrowindexes():void 0}getSourceUrl(){return"old"===this.#a?this.jqxGrid.jqxGrid("source")._source.url:"new"===this.#a?this.jqxGrid.source._source.url:void 0}hideColumn(e){let t=this.jqxGrid;return"string"==typeof e?("old"===this.#a&&(t.jqxGrid("beginupdate"),t.jqxGrid("hideColumn",e),t.jqxGrid("endupdate")),"new"===this.#a&&(t.beginupdate(),t.hidecolumn(e),t.endupdate()),!0):"object"==typeof e&&e.length>0&&(e.forEach(e=>{"old"===this.#a&&(t.jqxGrid("beginupdate"),t.jqxGrid("hideColumn",e),t.jqxGrid("endupdate")),"new"===this.#a&&(t.beginupdate(),t.hidecolumn(e),t.endupdate())}),!0)}on(e,t){this.jqxGrid.on(e,t)}refresh(){this.#m=!0,this.updateBoundData("all")}showColumn(e){let t=this.jqxGrid;return"string"==typeof e?("old"===this.#a&&(t.jqxGrid("beginupdate"),t.jqxGrid("showColumn",e),t.jqxGrid("endupdate")),"new"===this.#a&&(t.beginupdate(),t.showcolumn(e),t.endupdate()),!0):"object"==typeof e&&e.length>0&&(e.forEach(e=>{"old"===this.#a&&(t.jqxGrid("beginupdate"),t.jqxGrid("showColumn",e),t.jqxGrid("endupdate")),"new"===this.#a&&(t.beginupdate(),t.showcolumn(e),t.endupdate())}),!0)}updateBoundData(e){this.#t(),"all"!=(e=e||"data")?("old"===this.#a&&this.jqxGrid.jqxGrid("updatebounddata",e),"new"===this.#a&&this.jqxGrid.updatebounddata(e)):("old"===this.#a&&this.jqxGrid.jqxGrid("updatebounddata"),"new"===this.#a&&this.jqxGrid.updatebounddata())}updateCellValue(e,t,i){"old"===this.#a&&this.jqxGrid.jqxGrid("setcellvalue",e,t,i),"new"===this.#a&&this.jqxGrid.setcellvalue(e,t,i)}updateSelectedCellValue(e,t){"old"===this.#a&&this.jqxGrid.jqxGrid("setcellvalue",this.getSelectedRowIndex(),e,t),"new"===this.#a&&this.jqxGrid.setcellvalue(this.getSelectedRowIndex(),e,t)}updateSourceUrl(e,t){this.#k?this.#k.url=e:this.dataAdapter._source.url=e,(void 0===t||"boolean"==typeof t&&t)&&this.refresh()}}